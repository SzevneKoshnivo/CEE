name: Build and Test Memtool

on:  
  push:  
    branches: [main]  
  pull_request:  
    branches: [main]  

jobs:  
  build-and-test:  
    runs-on: ubuntu-latest  

    steps:  
      - name: Checkout repository  
        uses: actions/checkout@v3  

      - name: Install dependencies  
        run: sudo apt-get update && sudo apt-get install -y gcc  

      - name: Compile main program  
        run: gcc -o memtool main.c memtool.c -Wall -Wextra  

      - name: Compile test program  
        run: gcc -o memtool_test test_main.c memtool.c -Wall -Wextra  

      - name: Run tests  
        run: ./memtool_test $$  
